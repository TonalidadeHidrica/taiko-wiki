*譜面作成ソフト/使い方 [#title]

+まずtxtファイルで「譜面画像の元になる文章」を作成する
+「donscore0181」というフォルダの中にある「donscore」（あるいは「donscore.exe」）に、先程のtxtファイルをドラッグ＆ドロップする
+txtファイルに記述ミスなどの問題がなければ、txtファイルがあった場所と同じ場所に譜面画像ファイルが作成される
+攻略ページにアップロードする

''ドラッグ＆ドロップ時に、黒いウィンドウが出ますが、これは正常ですので安心してください。''~
（出ているウィンドウは「[[コマンドプロンプト>https://ja.wikipedia.org/wiki/%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%97%E3%83%AD%E3%83%B3%E3%83%97%E3%83%88]]」というものです。）

**txtファイルの作り方（初心者向け） [#beginner]

試しに、BPM変化なし・HSなし・拍子が4/4で変化なし・音符間隔が16分までの''[[さいたま2000(むずかしい)>難易度表/むずかしい/さいたま2000]]''を作成したいとします。

-txtファイルの1行目には「#title 【曲名】」、2行目には「#difficulty 【かんたん、ふつう、むずかしい、おにのいずれか】」、3行目には「#level 【★の数】」と書きます。※半角スペースに注意！！
--このとき、txtファイルのファイル名は譜面画像には何も影響を与えないため、なんでもいいです。

4行目は、見やすさのため、文字を入力せず改行しましょう。ここ以外でも、文字を入力せず改行することで、譜面画像に影響を与えず作業しやすくすることができます。

5行目から譜面に関する命令を書いていきます。

-5行目には「#bpm 【BPMの値】」を書きます。これで1小節目の頭に青文字でBPMが記載されます。

-6行目には1小節目の譜面を書き、7行目には2小節目の譜面を書き、……と繰り返すことで「譜面画像の元になる文章」ができあがります。

***譜面本体の書き方 [#beginner_notes]

-半角スペース……16分音符1つ分の休符
--1小節に1つも音符がない場合は''半角スペースを忘れないようにしてください''。半角スペースを忘れると「見やすさのための改行」と認識されてしまいます。

-半角小文字「o」……16分音符のドン
-半角小文字「x」……16分音符のカッ
-半角大文字「O」……16分音符のドン(大)
-半角大文字「X」……16分音符のカッ(大)
--ドン、ドン(大)は、それぞれ「c」「C」も許可されています。キーボード上で「x」の隣に「c」があるので、人によってはこちらのほうが入力しやすいかもしれません。

-譜面画像の改行……「#newline」

-ゴーゴータイムの開始……直前の行に「#begingogo」
-ゴーゴータイムの終了……直後の行に「#endgogo」

-黄色連打(小)の開始……「<」
-黄色連打(大)の開始……「(」

-連打の継続中……「=」

-黄色連打(小)の終了……終了の&color(red){''1文字前に''};「>」
-黄色連打(大)の開始……終了の&color(red){''1文字前に''};「)」
--太鼓シミュレーターで
 5000000000008000,
--と書いてあるものは、『どんすこあ！』では
 <==========>    
--になるので注意してください。

以上のルールのみで''[[さいたま2000(むずかしい)>難易度表/むずかしい/さいたま2000]]''の譜面は書くことができます。


 #title さいたま2000
 #difficulty むずかしい
 #level 7
 
 #bpm 200
                 
 #newline
 o   o   o   o   
 o   o   x   x   
 o   o   o   o   
 o   o   x   x   
 o   o   o   o   
 o   o   x   x   
 o   o   o   o   
 o   o   X   X   
 
 o o o o o o o   
 o   o   o o o   
 o o o o o o o   
 o o o   O   O   
 o o o o o o o   
 o   o   o o o   
 o o o o o o o   
 o   o   O   O   
 o o o o o o o   
 x   x   o o o   
 o o o o o o o   
 x x x   O   O   
 o o o o o o o   
 o   o   o o o   
 o o o o o o o   
 x   x   O   O   
 o   o   o o o   
 
 o ooo o o   x   
 o   o   o o o   
 o ooo o o       
 o   o   o o o   
 o ooo o o o o   
 o   o   o o o   
 o ooo o o   X   
 
 O   o   o o o   
 O   o   o o o   
 O   o   o o o   
 O   o   o o o   
 X   o   o o o   
 X   o   o o o   
 X   o   o o o   
 X   o   o o o   
 O   o   o o o   
 O   o   o o o   
 O   o   o o o   
 O   o   o o o   
 X   o   o o o   
 X   o   o o o   
 X   o   o o o   
 X   o   o o o   
 
 x x x x x x x   
 x x x x x x x   
 x x x x x x x   
 <==========>    
 x x x x x x x   
 x x x x x x x   
 x x x x x x x   
 <==============>
                 
                 
                 
 #newline
 
 #begingogo
 o   x   o o x   
 o o x o x o x   
 x   o   x x o   
 o x o x o o x   
 o   x   o o x   
 o o x o x o x   
 x   o   x x o   
 o x o x o o x   
 o   x   o o x   
 o o x o x o x   
 x   o   x x o   
 o x o x o o x   
 o   x   o o x   
 o o x o x o x   
 x   o   x x o   
 o x o x o o x   
 o   x   o o x   
 o o x o x o x   
 x   o   x x o   
 o x o x o o x   
 o   x   o o x   
 o o x o x o x   
 x   o   x x o   
 o x o x o o x   
 o   x   o o x   
 o o x o x o x   
 x   o   x x o   
 o x o x o o x   
 o   x   o o x   
 o o x o x o x   
 x   o   x x o   
 o x o x o o x   
 O               
 #endgogo
 
                 
                 


ただ、以上のルールのみでは書くことができない譜面も多々あります。そのような譜面について挑戦したい場合は次のステップに進みましょう。

**txtファイルの作り方（中級者向け） [#middle]

***画像からtxtに復元 [#reverse]
-「reverse.exe」に、譜面画像をドラッグ＆ドロップ。pngファイルがあった場所と同じ場所にtxtファイルが作成されます。
-攻略ページにアップロードした譜面にミスを見つけた場合には「reverse.exe」→「txtファイル編集」→「donscore.exe」で修正することができます。
-基本的に、「donscore.exe」以外によって作成された画像は復元できないので注意してください。

***一行に複数の小節を表記する [#compression]
-1行に1小節を超える音符を書いた場合、自動的に1小節で区切ってくれます。
--次の4行、
 o   x   o o x   
 o o x o x o x   
 x   o   x x o   
 o x o x o o x   
--これは、次の1行
 o   x   o o x   o o x o x o x   x   o   x x o   o x o x o o x   
--でも同じ譜面が作成されます。下の長い1行は、その1行で4小節分が記述できたりするので作成時には便利です。

***半角スペースの省略について [#ellipsis]
-1行に1小節に満たない音符を書いた場合、足りない部分には半角スペースが書かれているものと扱われます。
--つまり、最後まで半角スペースで埋めていた
 o___x___o_o_x___
--は、
 o___x___o_o_x
--と同じということです。（半角スペースでは見えないため、便宜上「_」で半角スペースを表現しています。）

-1行に多小節を書いた場合は、最後の半角スペースのみ省略可能です。
--次の1行
 o___x___o_o_x___o_o_x_o_x_o_x___x___o___x_x_o___o_x_o_x_o_o_x___
--これを次のように書くことはできますが、
 o___x___o_o_x___o_o_x_o_x_o_x___x___o___x_x_o___o_x_o_x_o_o_x
--次のように最後以外を省略することはできません。
 o___x___o_o_xo_o_x_o_x_o_xx___o___x_x_oo_x_o_x_o_o_x

-半角スペース1つだけ書いておくと、音符のない1小節になります。

***文字数に関する注意 [#attention_charnum]
-たった1文字余計に入力したせいで「まるまる1小節ズレる」ということはよくあるミスなので注意してください。

-例えば、太鼓シミュレーターで
 1011201020112010,
 1111201021112010,
 1011201120112010,
 11112010104000400,　（←0が1文字多い）
-というミスをしても、シミュレーター上で小節数がズレることはありませんが、それをそのまま、
 o_oox_o_x_oox_o_
 oooox_o_xooox_o_
 o_oox_oox_oox_o_
 oooox_o_o_X___X__
-と移植すると、画像には必要のない全休符（1小節）が現れてしまいます。

***拍子変化 [#meter]
-「#meter 【分母】 【分子】」と書くと、次の小節からその拍子が適応されます。
--[[エリンギのエクボ>難易度表/おに/エリンギのエクボ]]のような7/8拍子の場合は、「#meter 7 8」ではなく、&size(18){''「#meter 8 7」''};なので注意してください。（「8分の7拍子」と捉えるとわかりやすい。）
--省略した場合は（一度も書かれていない間は）「#meter 4 4」が書いてあるものとして扱われます。

***16分音符以外の音符を使う [#beatchar]
-「#beatchar 【分母1つあたりの文字数】」
--省略した場合は（一度も書かれていない間は）「#beatchar 4」が書いてあるものとして扱われます。

***#meterと#beatcharの関係 [#whats_beatchar]
-「【分母】分の【分子】拍子」とは、「''【分母】音符が【分子】個で1小節''」ということを意味しています。
-「#beatchar」では、「#meter」の分母を基準に、1文字の音価を決める働きがあります。
--「『#meter 4 4』の『#beatchar 4』」なら、「4分音符1つが4文字」、~
「『#meter 4 4』の『#beatchar 3』」なら、「4分音符1つが3文字」、~
「『#meter 4 4』の『#beatchar 12』」なら、「4分音符1つが12文字」です。

|&attachref(beatchar.png,nolink);|

-拍子変化や連打等で#beatcharを一時的に変えた場合、元に戻すのを忘れないようにしてください。

***小節頭のBPM変化 [#bpmchange]
-「#bpm 【bpmの値】」と書くと、次の小節の頭にそのBPMが記載されます。

***小節頭のHS変化 [#scroll]
-「#hs 【hsの値】」と書くと、次の小節の頭にそのBPMが記載されます。

***小節途中のBPM変化、HS変化、ゴーゴー開始・終了 [#divide]
-特定の命令の後ろに「【4分音符をｎ等分した音符】 【その個数】」を書くと、小節頭から右にずれた位置にその命令を記載することができます。

-「#bpm 200 1 1」なら、「BPM200が、4分音符1つ分右」になります。~
「#bpm 200 1 2」なら、「BPM200が、4分音符2つ分右」、~
「#bpm 200 1 3」なら、「BPM200が、4分音符3つ分右」です。

-「#hs 2 2 5」なら、「HS2が、8分音符5つ分右」になります。
--「8分音符＝4分音符を2等分した音符」ということです。

-「#endgogo 4 1」なら、「ゴーゴータイムの終了が、16分音符1つ分右」になります。


***以下執筆中… [#j9387b74]

-風船
--[@(打数)===...===]
--太鼓シミュレーターで、
 BALLOON:10
 7000000000008000,
--と書いてあるものは
 [@10=======]    
--になる。連打系のルールとして終了の&color(red){''1文字前に''};「]」を忘れないように。

-くす玉
--[k(打数)===...===]
--「kusudama」のk

-小節線を非表示
-#barlineoff

-小節線を表示
-#barlineon

-正しい黄色連打の長さ
--「#meter 4 4」の場合は、「#beatchar 12」にして、48分音符1つ分短くすれば良い。
--拍子の分母が違う場合は適宜調整

**txtファイルの作り方（上級者向け） [#expert]

-譜面分岐
--#branch 【分岐譜面】
--普通・玄人・達人があるなら「ooo」。普通・達人のみなら「oxo」。玄人・達人のみなら「xoo」。
--「#branch」のみを書くと、小節線が黄色くなるだけ。

-小節途中のHS変化（譜面分岐で、特定のレベルのみにHSがある場合）
--#hs 【hsの値】 【分岐譜面】 【分母】 【分子】

-「#beatchar」を変えないで三連符
--3___
--「_」には「o, O, c, C, x, X, B, 半角スペース」

-タブスペース
--「#tab 4」「#tab 8」で指定できる。
--%%あんまり使ってる人見ない%%

-爆弾音符
--B
--「Bomb」のB（小文字bは鈴）

-芋
--[p(打数)===...===]
--「potate」のp

-鈴
--[b(打数)===...===]
--「bell」のb

-でんでん
--[d(打数)===...===]
--「denden」のd

-「#beatchar 24」とかについて
--風船系が小節の最後のほうにある場合とかに使うこともある。

-音符等の画像を変える。
--「pic.png」を直接編集すると可能。
---音符……24x24
---文字……6x6
--双打を譜面分岐で表現するときに、黄色線を白線・レーンの色を調整とかきる。

-コメント行
--行頭に「;」
--行途中のコメントや複数行のコメントはない

-見た目譜面について
--#meterと#beatcharで無茶をしすぎると音符が等間隔にならないことがある（要検証）。

-ピクセル
--4分音符：48px
--8分音符：24px
--12分音符：16px
--16分音符：12px
--24分音符：8px
--32分音符：6px
--48分音符：4px
--64分音符：3px
--96分音符：2px

-黒線
--小節途中の命令を、1小節からはみ出すようにすると黒線が使える。
--「#hs 2 1 4」なら5拍目＝4/4拍子の次の小節線が黒くなってHS2が書かれる。
